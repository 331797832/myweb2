import{b as K,d as F,_ as J,w as Q}from"./base-BFPfMuUA.js";import{E as D,u as X,i as Y,a as U,b as ee,c as te,d as oe}from"./el-col-nx3NiRpH.js";import{E as se,a as ne,b as ae}from"./el-form-item-XpngJs3B.js";import{i as le,u as ie,T as A,a as re,C as ue,E as V,b as ce}from"./el-button-BwmBVEdI.js";import{g as de}from"./user-DxPkmrPn.js";import{d as P,r as $,c as x,o as fe,a as S,b as y,w as g,e as q,f as _,n as O,u as i,g as h,h as B,i as pe,t as j,j as me,k as H,F as ve,v as R,l as ge,m as p,T as ye,p as z,q as L,s as _e,x as Z,y as Ce,z as he,A as we,B as be,C as Ee,D as Te,_ as xe}from"./index-DL5ljozg.js";const W=["success","info","warning","error"],ke=K({customClass:{type:String,default:""},dangerouslyUseHTMLString:Boolean,duration:{type:Number,default:4500},icon:{type:le},id:{type:String,default:""},message:{type:F([String,Object,Function]),default:""},offset:{type:Number,default:0},onClick:{type:F(Function),default:()=>{}},onClose:{type:F(Function),required:!0},position:{type:String,values:["top-right","top-left","bottom-right","bottom-left"],default:"top-right"},showClose:{type:Boolean,default:!0},title:{type:String,default:""},type:{type:String,values:[...W,""],default:""},zIndex:Number}),Ne={destroy:()=>!0},Se=P({name:"ElNotification"}),Ie=P({...Se,props:ke,emits:Ne,setup(e,{expose:n}){const o=e,{ns:a,zIndex:u}=ie("notification"),{nextZIndex:c,currentZIndex:m}=u,{Close:v}=ue,d=$(!1);let l;const r=x(()=>{const s=o.type;return s&&A[o.type]?a.m(s):""}),t=x(()=>o.type&&A[o.type]||o.icon),f=x(()=>o.position.endsWith("right")?"right":"left"),k=x(()=>o.position.startsWith("top")?"top":"bottom"),b=x(()=>{var s;return{[k.value]:`${o.offset}px`,zIndex:(s=o.zIndex)!=null?s:m.value}});function E(){o.duration>0&&({stop:l}=X(()=>{d.value&&C()},o.duration))}function N(){l==null||l()}function C(){d.value=!1}function T({code:s}){s===V.delete||s===V.backspace?N():s===V.esc?d.value&&C():E()}return fe(()=>{E(),c(),d.value=!0}),re(document,"keydown",T),n({visible:d,close:C}),(s,Me)=>(y(),S(ye,{name:i(a).b("fade"),onBeforeLeave:s.onClose,onAfterLeave:Pe=>s.$emit("destroy"),persisted:""},{default:g(()=>[q(_("div",{id:s.id,class:h([i(a).b(),s.customClass,i(f)]),style:O(i(b)),role:"alert",onMouseenter:N,onMouseleave:E,onClick:s.onClick},[i(t)?(y(),S(i(D),{key:0,class:h([i(a).e("icon"),i(r)])},{default:g(()=>[(y(),S(pe(i(t))))]),_:1},8,["class"])):B("v-if",!0),_("div",{class:h(i(a).e("group"))},[_("h2",{class:h(i(a).e("title")),textContent:j(s.title)},null,10,["textContent"]),q(_("div",{class:h(i(a).e("content")),style:O(s.title?void 0:{margin:0})},[me(s.$slots,"default",{},()=>[s.dangerouslyUseHTMLString?(y(),H(ve,{key:1},[B(" Caution here, message could've been compromised, never use user's input as message "),_("p",{innerHTML:s.message},null,8,["innerHTML"])],2112)):(y(),H("p",{key:0},j(s.message),1))])],6),[[R,s.message]]),s.showClose?(y(),S(i(D),{key:0,class:h(i(a).e("closeBtn")),onClick:ge(C,["stop"])},{default:g(()=>[p(i(v))]),_:1},8,["class","onClick"])):B("v-if",!0)],2)],46,["id","onClick"]),[[R,d.value]])]),_:3},8,["name","onBeforeLeave","onAfterLeave"]))}});var Fe=J(Ie,[["__file","notification.vue"]]);const I={"top-left":[],"top-right":[],"bottom-left":[],"bottom-right":[]},M=16;let Ve=1;const w=function(e={},n){if(!Y)return{close:()=>{}};(z(e)||L(e))&&(e={message:e});const o=e.position||"top-right";let a=e.offset||0;I[o].forEach(({vm:r})=>{var t;a+=(((t=r.el)==null?void 0:t.offsetHeight)||0)+M}),a+=M;const u=`notification_${Ve++}`,c=e.onClose,m={...e,offset:a,id:u,onClose:()=>{Be(u,o,c)}};let v=document.body;U(e.appendTo)?v=e.appendTo:z(e.appendTo)&&(v=document.querySelector(e.appendTo)),U(v)||(v=document.body);const d=document.createElement("div"),l=p(Fe,m,_e(m.message)?m.message:L(m.message)?()=>m.message:null);return l.appContext=ee(n)?w._context:n,l.props.onDestroy=()=>{Z(null,d)},Z(l,d),I[o].push({vm:l}),v.appendChild(d.firstElementChild),{close:()=>{l.component.exposed.visible.value=!1}}};W.forEach(e=>{w[e]=(n={},o)=>((z(n)||L(n))&&(n={message:n}),w({...n,type:e},o))});function Be(e,n,o){const a=I[n],u=a.findIndex(({vm:l})=>{var r;return((r=l.component)==null?void 0:r.props.id)===e});if(u===-1)return;const{vm:c}=a[u];if(!c)return;o==null||o(c);const m=c.el.offsetHeight,v=n.split("-")[0];a.splice(u,1);const d=a.length;if(!(d<1))for(let l=u;l<d;l++){const{el:r,component:t}=a[l].vm,f=Number.parseInt(r.style[v],10)-m-M;t.props.offset=f}}function $e(){for(const e of Object.values(I))e.forEach(({vm:n})=>{n.component.exposed.visible.value=!1})}w.closeAll=$e;w._context=null;const G=Q(w,"$notify"),He=()=>{let e="";const n=new Date().getHours();return n<=9?e="早上":n<=12?e="上午":n<=18?e="下午":e="晚上",e},ze={class:"login_container"},Le=P({__name:"index",setup(e){const n=$(),o=he(),a=we(),u=$(!1),c=Ce({username:"admin",password:"111111"}),m=async()=>{await n.value.validate(),u.value=!0;try{de(c).then(r=>{console.log(r),G({type:"success",message:"欢迎回来",title:`HI,${He()}好`}),u.value=!1;const t=a.query.redirect;o.push({path:t||"/"})})}catch(r){throw G({type:"error",message:r.message}),r}finally{u.value=!1}},l={username:[{trigger:"change",validator:(r,t,f)=>{t.length>=5?f():f(new Error("账号长度至少五位"))}}],password:[{trigger:"change",validator:(r,t,f)=>{t.length>=6?f():f(new Error("密码长度至少六位"))}}]};return(r,t)=>{const f=oe,k=ae,b=ne,E=ce,N=se,C=te;return y(),H("div",ze,[p(C,null,{default:g(()=>[p(f,{span:10,xs:4}),p(f,{span:6,xs:20},{default:g(()=>[p(N,{class:"login_form",model:c,rules:l,ref_key:"loginForms",ref:n},{default:g(()=>[t[3]||(t[3]=_("h1",null,"Hello",-1)),t[4]||(t[4]=_("h2",null,"欢迎来到新世界",-1)),p(b,{prop:"username"},{default:g(()=>[p(k,{"prefix-icon":i(be),modelValue:c.username,"onUpdate:modelValue":t[0]||(t[0]=T=>c.username=T)},null,8,["prefix-icon","modelValue"])]),_:1}),p(b,{prop:"password"},{default:g(()=>[p(k,{type:"password","prefix-icon":i(Ee),modelValue:c.password,"onUpdate:modelValue":t[1]||(t[1]=T=>c.password=T),"show-password":""},null,8,["prefix-icon","modelValue"])]),_:1}),p(b,null,{default:g(()=>[p(E,{loading:u.value,class:"login_btn",type:"primary",size:"default",onClick:m},{default:g(()=>t[2]||(t[2]=[Te(" 登录 ")])),_:1},8,["loading"])]),_:1})]),_:1},8,["model"])]),_:1})]),_:1})])}}}),Re=xe(Le,[["__scopeId","data-v-713d6dea"]]);export{Re as default};
